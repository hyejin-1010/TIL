## 20. strict mode

- 존재하지 않는 변수를 재할당할 때, 자바스크립트 엔진은 해당 프로퍼티를 전역 객체에 동적으로 생성한다. 이러한 것은 **암묵적 전역(implicit global)**이라 한다.
- 이는 오류를 발생시킬 원인이 크다.
- 이에 ES5부터 strict mode(엄격 모드)가 추가되었다.
- ES6에서 도입된 클래스와 모듈은 기본적으로 strict mode가 적용된다.

### 린트 도구
- Eslint와 같은 린트 도구를 사용해도 strict mode와 유사한 효과를 얻을 수 있다.
- 정적 분석(static analysis) 기능을 통해 소스코드를 실행하기 전에 소스코드를 스캔하여 문법적 오류만이 아닌 잠재적 오류까지 찾아내고 오류의 원인을 리포팅해주는 유용한 도구이다.
- 코딩 컨벤션을 설정 파일 형태로 정의하고 강제할 수 있기 떄문에 더욱 강력한 효과를 얻을 수 있다.

### strict mode의 적용
- 전역의 선두 또는 함수 몸체의 선두에 'use strict;'를 추가한다.
- 전역의 선두: 스크립트 전체에 적용
- 함수 몸체의 선두: 해당 함수와 중첩 함수에 적용
- 코드의 선두에 위치하지 않으면 strict mode가 제대로 동작하지 않는다.

### 전역에 strict mode를 적용하는 것은 피하자
- 전역에 적용한 strict mode는 스크립트 단위로 적용된다.
- strict mode 스크립트와 non-strict mode 스크립트를 혼용하는 것은 오류를 발생시킬 수 있다. (외부 서드파티 라이브러리를 사용하는 경우 라이브러리가 non-strcit mode인 경우도 있다.)

### 함수 단위로 strict mode를 적용하는 것도 피하자
- 어떤 함수는 적용하고 어떤 함수는 적용하지 않는 것도 바람직하지 않다.
- 모든 함수에 일일이 적용하는 것 또한 번거로운 일이다.
- strict mode가 적용된 함수가 참조할 함수 외부의 컨텍스트에 strict mode를 적용하지 않는다면, 이 또한 문제가 발생할 수 있다.

=> **즉시 실행 함수로 감싼 스크립트 단위**로 적용하는 것이 바람직하다.

### strict mode가 발생시키는 에러
1. 암묵적 전역
	- ReferenceError
2. 변수, 함수, 매개변수의 삭제
	- SyntaxError
3. 매개변수 이름의 중복
	- SyntaxError
4. with 문의 사용
	- SyntaxError
	- 전달된 객체를 스코프 체인에 추가
	- 객체의 프로퍼티를 반복해서 사용할 때 객체 이름을 생략할 수 있어 코드가 간단해지지만, 성느오가 가독성이 나빠지는 문제가 있다.

### strict mode 적용에 의한 변화
1. 일반 함수의 this
	- strict mode에서 함수를 일반 함수로서 호출하면 this에 undefined가 바인딩된다. (일반 함수 내부에서는 this를 사용할 필요가 없기 때문)
2. arguments 객체
	- 매개변수에 전달된 인수를 재할당하여 변경해도 arguments 객체에 반영되지 않는다.